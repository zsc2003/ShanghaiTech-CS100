## 关于文件的组织

第一次接触这种多文件编译的代码项目，你可能会有些懵：到底什么时候要开一个新文件，什么时候要开一个新文件夹？哪些代码应该放在 `.cpp` 里？

这里我的建议是：一个文件里存放一组同类的事物，一个文件夹代表更大的类别。比如，我将所有的植物、种子、铲子都放在了 `Plants.hpp/cpp` 中，将子弹和爆炸物都放在 `Projectiles.hpp/cpp` 中，将背景、种植位、阳光这些东西放在 `Environment.hpp/cpp` 中，而这些文件都在 `GameObject` 文件夹中。我并不喜欢分得太细，比如一个文件只放一个类，因为这个项目规模其实非常小，分得太细管理起来比较麻烦。

哪些代码应该放在 `.cpp` 里？这个问题就比较重要了。出题人在这方面也是相当保守的，他几乎把所有函数的定义都放在了 `.cpp` 里，实际上这是没有必要的。要回答这个问题，就要先理解：为什么要将函数的定义拿到 `.cpp` 里去？原因通常有二：

1. 某些函数的定义如果放在头文件里，会产生循环依赖的问题。这个问题在 FAQ 里已经详细地解释过了，并且许多同学在实践中应该也遇到了。
2. 某些函数的定义较为复杂，我不希望对它的轻微改动会造成大量的文件重新编译。一个 `.hpp` 会被 `#include` 进很多文件中，而一个 `.cpp` 是单独编译的，所以对 `.hpp` 的改动造成的影响通常比对 `.cpp` 的改动造成的影响大。

所以，如果一个函数符合以上两种情况中的任何一种，它就应该被放在 `.cpp` 中定义，**否则就直接在原地定义即可**。典型的可以直接在原地定义的函数包括 getters/setters 以及一些行为简单的构造/析构函数。在头文件中原地定义函数有一个巨大的好处，那就是能显著地减少麻烦，例如在我的这份实现中， `GameObject.cpp` 压根就不存在，其它的一些 `.cpp` 文件里也都只有几个相对复杂的函数。
